# Moodify - System Architecture

## ğŸ“Š High-Level Architecture

\`\`\`
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                           â”‚
â”‚                      (React + Tailwind CSS)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚  HTTP/REST
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CLIENT BROWSER                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Text NLP   â”‚  â”‚  face-api.js â”‚  â”‚ Web Audio API â”‚         â”‚
â”‚  â”‚  Classifier  â”‚  â”‚   (ML Model) â”‚  â”‚   Analyzer    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                  â”‚                  â”‚                  â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                            â”‚                                     â”‚
â”‚                     Detected Mood                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚  AJAX Request
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXPRESS BACKEND                               â”‚
â”‚                   (Node.js REST API)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Mood Analysis Routes                         â”‚   â”‚
â”‚  â”‚  /api/mood/analyze-text  |  /api/mood/analyze-voice     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           Spotify Integration Routes                      â”‚   â”‚
â”‚  â”‚  /api/spotify/recommendations  |  /api/spotify/search   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â”‚                                     â”‚
â”‚                    SpotifyService                                â”‚
â”‚                 (Token Cache, Mapping)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚  HTTPS
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SPOTIFY WEB API                               â”‚
â”‚              (Music Data & Recommendations)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Authentication  â”‚  Recommendations  â”‚  Search  â”‚  Tracksâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
\`\`\`

---

## ğŸ”„ Data Flow Diagram

### Text Mood Input Flow

\`\`\`
User Types Text
      â”‚
      â–¼
TextMoodInput Component
      â”‚
      â”œâ”€â†’ Local NLP Classification
      â”‚   (moodMapper.js)
      â”‚
      â””â”€â†’ API Call: POST /api/mood/analyze-text
          (Validation & Confirmation)
                â”‚
                â–¼
          Backend Analysis
          (Keyword Matching)
                â”‚
                â–¼
          Return: { mood: "happy", confidence: 0.85 }
                â”‚
                â–¼
          API Call: GET /api/spotify/recommendations?mood=happy
                â”‚
                â–¼
          Spotify Service
                â”‚
                â”œâ”€â†’ Get/Cache Access Token
                â”œâ”€â†’ Map Mood to Genres
                â”œâ”€â†’ Build Audio Features
                â””â”€â†’ Call Spotify API
                          â”‚
                          â–¼
                    Spotify Returns Tracks
                          â”‚
                          â–¼
                    Format Response
                          â”‚
                          â–¼
                    Display in SongCard Components
\`\`\`

### Facial Expression Flow

\`\`\`
User Clicks "Start Face Detection"
      â”‚
      â–¼
Request Camera Permission
      â”‚
      â”œâ”€â†’ Denied â†’ Show Error
      â”‚
      â””â”€â†’ Granted
          â”‚
          â–¼
    Load face-api.js Models
          â”‚
          â”œâ”€â†’ TinyFaceDetector
          â”œâ”€â†’ FaceExpressionNet
          â””â”€â†’ FaceLandmark68Net
                â”‚
                â–¼
    Start Video Stream
                â”‚
                â–¼
    Detection Loop (requestAnimationFrame)
          â”‚
          â”œâ”€â†’ Detect Face
          â”œâ”€â†’ Analyze Expression
          â”‚   (happy, sad, angry, neutral, etc.)
          â”‚
          â””â”€â†’ Map to Mood Category
                â”‚
                â–¼
          Get Recommendations
          (Same flow as text input)
\`\`\`

### Voice Analysis Flow

\`\`\`
User Clicks "Start Voice Detection"
      â”‚
      â–¼
Request Microphone Permission
      â”‚
      â”œâ”€â†’ Denied â†’ Show Error
      â”‚
      â””â”€â†’ Granted
          â”‚
          â–¼
    Initialize Web Audio API
          â”‚
          â”œâ”€â†’ AudioContext
          â”œâ”€â†’ Analyser Node
          â””â”€â†’ MediaRecorder
                â”‚
                â–¼
    Record Audio (5 seconds)
          â”‚
          â”œâ”€â†’ Monitor Audio Level
          â”œâ”€â†’ FFT Analysis
          â””â”€â†’ Extract Features
              â”‚
              â”œâ”€â†’ Pitch
              â”œâ”€â†’ Energy
              â””â”€â†’ Tempo
                    â”‚
                    â–¼
              Heuristic Classification
              (if energy > 0.7 && pitch > 0.6 â†’ happy)
                    â”‚
                    â–¼
              Return Detected Mood
                    â”‚
                    â–¼
              Get Recommendations
              (Same flow as text input)
\`\`\`

---

## ğŸ—‚ï¸ Component Hierarchy

\`\`\`
App.jsx
 â”‚
 â”œâ”€â”€â”€ Navbar
 â”‚     â””â”€â”€â”€ NavLink (Home, Discover)
 â”‚
 â”œâ”€â”€â”€ Routes
       â”‚
       â”œâ”€â”€â”€ Home (/)
       â”‚     â”œâ”€â”€â”€ Hero Section
       â”‚     â”œâ”€â”€â”€ Features Section
       â”‚     â”œâ”€â”€â”€ Moods Section
       â”‚     â””â”€â”€â”€ CTA Section
       â”‚
       â””â”€â”€â”€ Recommend (/recommend)
             â”œâ”€â”€â”€ Tab Navigation
             â”‚     â”œâ”€â”€â”€ Text Tab
             â”‚     â”œâ”€â”€â”€ Face Tab
             â”‚     â””â”€â”€â”€ Voice Tab
             â”‚
             â”œâ”€â”€â”€ Mood Detection
             â”‚     â”œâ”€â”€â”€ TextMoodInput
             â”‚     â”œâ”€â”€â”€ FaceMoodDetector
             â”‚     â””â”€â”€â”€ VoiceMoodDetector
             â”‚
             â””â”€â”€â”€ Recommendations Display
                   â””â”€â”€â”€ SongCard (grid)
                         â”œâ”€â”€â”€ Album Art
                         â”œâ”€â”€â”€ Song Info
                         â”œâ”€â”€â”€ Preview Player
                         â””â”€â”€â”€ Spotify Link
\`\`\`

---

## ğŸ”Œ API Architecture

### Backend Routes

\`\`\`
server/index.js (Main Entry)
 â”‚
 â”œâ”€â”€â”€ Middleware
 â”‚     â”œâ”€â”€â”€ CORS
 â”‚     â”œâ”€â”€â”€ JSON Parser
 â”‚     â””â”€â”€â”€ Logger
 â”‚
 â”œâ”€â”€â”€ Routes
 â”‚     â”‚
 â”‚     â”œâ”€â”€â”€ /api/spotify/*
 â”‚     â”‚     â”œâ”€â”€â”€ GET /recommendations
 â”‚     â”‚     â”œâ”€â”€â”€ GET /search
 â”‚     â”‚     â””â”€â”€â”€ GET /moods
 â”‚     â”‚
 â”‚     â””â”€â”€â”€ /api/mood/*
 â”‚           â”œâ”€â”€â”€ POST /analyze-text
 â”‚           â””â”€â”€â”€ POST /analyze-voice
 â”‚
 â””â”€â”€â”€ Services
       â””â”€â”€â”€ spotifyService.js
             â”œâ”€â”€â”€ getAccessToken()
             â”œâ”€â”€â”€ getMoodMapping()
             â”œâ”€â”€â”€ getRecommendations()
             â””â”€â”€â”€ searchTracks()
\`\`\`

### Request/Response Flow

\`\`\`
Client Request
      â”‚
      â–¼
Express Router
      â”‚
      â”œâ”€â†’ Validate Input
      â”‚
      â”œâ”€â†’ Call Service
      â”‚     â”‚
      â”‚     â”œâ”€â†’ Business Logic
      â”‚     â”œâ”€â†’ External API Call
      â”‚     â””â”€â†’ Data Transformation
      â”‚
      â””â”€â†’ Format Response
            â”‚
            â–¼
      Send to Client
\`\`\`

---

## ğŸ’¾ State Management

### Client-Side State

\`\`\`
Recommend.jsx (Page Level)
 â”‚
 â”œâ”€â”€â”€ activeTab (text | face | voice)
 â”œâ”€â”€â”€ currentMood (happy | sad | angry | ...)
 â”œâ”€â”€â”€ recommendations (Track[])
 â”œâ”€â”€â”€ isLoading (boolean)
 â””â”€â”€â”€ error (string | null)
       â”‚
       â”œâ”€â†’ Passed to Child Components
       â””â”€â†’ Updated by Callbacks
\`\`\`

### Server-Side State

\`\`\`
spotifyService.js (Singleton)
 â”‚
 â”œâ”€â”€â”€ accessToken (cached)
 â”œâ”€â”€â”€ tokenExpiry (timestamp)
 â””â”€â”€â”€ Token refresh logic
\`\`\`

---

## ğŸ¨ Styling Architecture

\`\`\`
Tailwind CSS
 â”‚
 â”œâ”€â”€â”€ Base Layer (@tailwind base)
 â”‚     â””â”€â”€â”€ Global styles
 â”‚
 â”œâ”€â”€â”€ Components Layer (@tailwind components)
 â”‚     â”œâ”€â”€â”€ .gradient-bg
 â”‚     â”œâ”€â”€â”€ .glass-effect
 â”‚     â”œâ”€â”€â”€ .btn-primary
 â”‚     â”œâ”€â”€â”€ .btn-secondary
 â”‚     â”œâ”€â”€â”€ .mood-card
 â”‚     â””â”€â”€â”€ .song-card
 â”‚
 â””â”€â”€â”€ Utilities Layer (@tailwind utilities)
       â””â”€â”€â”€ Tailwind utility classes
\`\`\`

---

## ğŸ”’ Security Architecture

\`\`\`
Environment Variables (.env)
 â”‚
 â”œâ”€â”€â”€ Backend
 â”‚     â”œâ”€â”€â”€ SPOTIFY_CLIENT_ID (secret)
 â”‚     â”œâ”€â”€â”€ SPOTIFY_CLIENT_SECRET (secret)
 â”‚     â”œâ”€â”€â”€ PORT
 â”‚     â”œâ”€â”€â”€ NODE_ENV
 â”‚     â””â”€â”€â”€ CLIENT_URL
 â”‚
 â””â”€â”€â”€ Frontend
       â””â”€â”€â”€ VITE_API_URL (public)

CORS Protection
 â”‚
 â””â”€â”€â”€ Only accepts requests from CLIENT_URL

Input Validation
 â”‚
 â”œâ”€â”€â”€ Mood parameter validation
 â”œâ”€â”€â”€ Limit parameter validation
 â””â”€â”€â”€ Text input sanitization

No Secrets in Client
 â”‚
 â””â”€â”€â”€ All Spotify API calls through backend
\`\`\`

---

## ğŸš€ Deployment Architecture

### Development

\`\`\`
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  localhost:3000 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  localhost:5000 â”‚
â”‚   Vite Dev      â”‚   Proxy â”‚   Node Server   â”‚
â”‚   Server        â”‚         â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
\`\`\`

### Production

\`\`\`
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Vercel CDN       â”‚         â”‚   Render/Railway   â”‚
â”‚  (Static Frontend) â”‚         â”‚   (Node Backend)   â”‚
â”‚  *.vercel.app      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   *.onrender.com   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  HTTPS  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                              â”‚
         â”‚                              â”‚
         â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User Browser     â”‚         â”‚   Spotify API      â”‚
â”‚   (Face/Voice)     â”‚         â”‚   (Music Data)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
\`\`\`

---

## ğŸ“Š Technology Stack Diagram

\`\`\`
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PRESENTATION                       â”‚
â”‚  React 18 | Tailwind CSS | Framer Motion            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CLIENT LOGIC                        â”‚
â”‚  React Router | Axios | face-api.js | Web Audio API â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 BUILD TOOLS                           â”‚
â”‚  Vite | PostCSS | Autoprefixer                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚  HTTP/REST
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 SERVER LAYER                          â”‚
â”‚  Express | CORS | dotenv                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              EXTERNAL SERVICES                        â”‚
â”‚  Spotify Web API | OAuth 2.0                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
\`\`\`

---

## ğŸ¯ Mood Detection Pipeline

\`\`\`
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INPUT METHODS                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Text  â”‚      â”‚  Face  â”‚      â”‚ Voice  â”‚           â”‚
â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚               â”‚               â”‚
       â”‚  Keywords     â”‚  ML Model     â”‚  Audio Features
       â”‚               â”‚               â”‚
       â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MOOD CLASSIFICATION                         â”‚
â”‚     happy | sad | angry | relaxed | calm |              â”‚
â”‚          energetic | romantic                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               MOOD TO MUSIC MAPPING                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Genres    â”‚  pop, dance, party                  â”‚  â”‚
â”‚  â”‚  Features  â”‚  valence, energy, tempo, loudness   â”‚  â”‚
â”‚  â”‚  Seeds     â”‚  Genre combinations for Spotify     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            SPOTIFY RECOMMENDATIONS                       â”‚
â”‚  Algorithm: Audio Feature Matching + Popularity         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                CURATED PLAYLIST                          â”‚
â”‚  20 songs matched to user's emotional state             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
\`\`\`

---

This architecture ensures:
âœ… Separation of concerns
âœ… Scalability
âœ… Maintainability
âœ… Security
âœ… Performance
âœ… User experience
